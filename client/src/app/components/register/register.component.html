<div class="container">
  <div class="col-md-8 order-md-1">
  <h4 class="mb-3">Billing address</h4>

  <form [formGroup]="form" (submit) = "onRegisterSubmit()">
    <div class="row">


      <div class="col-md-6 mb-3">
        <label for="firstName">First name</label>
        <div [ngClass]="{'has-error': (form.controls.fname.errors && form.controls.fname.dirty),'has-success':(!form.controls.fname.errors)}">
          <input type="text" class="form-control" formControlName="fname" id="firstName" placeholder="First Name" value="">
          <ul class="help-block">
          <li *ngIf="form.controls.fname.errors?.required && form.controls.fname.dirty">This field is required</li>
        </ul>
        </div>
        </div>
      <div class="col-md-6 mb-3">
        <label for="lastName">Last name</label>
        <div [ngClass]="{'has-error': (form.controls.lname.errors && form.controls.lname.dirty),'has-success':(!form.controls.lname.errors)}">
        <input type="text" class="form-control" formControlName="lname" id="lastName" placeholder="Last Name" value="" >
        <ul class="help-block">
          <li *ngIf="form.controls.lname.errors?.required && form.controls.lname.dirty">This field is required</li>
        </ul>

    </div>
  </div>
</div>

      <div class="form-group">
          <label for="address">Birthday:</label>
          <div [ngClass]="{'has-error': (form.controls.bday.errors && form.controls.bday.dirty),'has-success':(!form.controls.bday.errors)}">
          <input type="date" class="form-control" id="bday" formControlName="bday" placeholder="Date of Birth">
          <ul class="help-block">
            <li *ngIf="form.controls.bday.errors?.required && form.controls.bday.dirty">Birthday is required</li>
          </ul>
        </div>
      </div>

      <div class="form-group">
        <label for="pwd">Username:</label>
        <div [ngClass]="{'has-error': (form.controls.username.errors && form.controls.username.dirty)||(!usernameValid && form.controls.username.dirty),'has-success':(!form.controls.username.errors && usernameValid)}">
          <input type="username" placeholder="Username" name="username" formControlName="username" class="form-control" id="username" (blur)=checkUsername()>
          <ul class="help-block">
            <li *ngIf="form.controls.username.errors?.required && form.controls.username.dirty">This field is required</li>
            <li *ngIf="form.controls.username.errors?.minlength || form.controls.username.errors?.maxlength">minimum charachters: 5, minimum charachters: 30</li>
            <li *ngIf="usernameMessage">{{usernameMessage}}</li>
          </ul>
        </div>
      </div>

    <div class="form-group">
      <label for="email">Email address:</label>
      <div [ngClass]="{'has-error': (form.controls.email.errors && form.controls.email.dirty)||(!emailValid && form.controls.email.dirty),'has-success':(!form.controls.email.errors&&emailValid)}">
        <input type="email" placeholder="Email" name="email" formControlName="email" class="form-control" id="email" (blur)=checkEmail()>
        <ul class="help-block">
          <li *ngIf="form.controls.email.errors?.required && form.controls.email.dirty">This field is required</li>
          <li *ngIf="(form.controls.email.errors?.minlength || form.controls.email.errors?.maxlength) && form.controls.email.dirty">minimum charachters: 5, minimum charachters: 30</li>
          <li *ngIf="form.controls.email.errors?.validateEmail && form.controls.email.dirty">Must be a valid email</li>
          <li *ngIf="emailMessage"> {{emailMessage}}</li>
        </ul>
      </div>
    </div>

    <div class="form-group">
      <label for="pwd">Password:</label>
      <div [ngClass]="{'has-error': (form.controls.password.errors && form.controls.password.dirty),'has-success':!form.controls.password.errors}">
        <input type="password" placeholder="Password" name="password" formControlName="password" class="form-control" id="pwd">
        <ul class="help-block">
          <li *ngIf="form.controls.password.errors?.required && form.controls.password.dirty">This field is required</li>
          <li *ngIf="form.controls.password.errors?.minlength || form.controls.password.errors?.maxlength">minimum charachters: 5, minimum charachters: 30</li>
        </ul>
      </div>
    </div>

    <div class="form-group">
      <label for="confirm">Confirm Password:</label>
      <div [ngClass]="{'has-error': (form.controls.confirm.errors && form.controls.confirm.dirty) || (form.errors?.matchingPasswords && form.controls.confirm.dirty),
      'has-success':!form.controls.confirm.errors && !form.errors?.matchingPasswords}">
        <input type="password" placeholder="Password" name="confirm" formControlName="confirm" class="form-control" id="confirm">
        <ul class="help-block">
          <li *ngIf="form.controls.confirm.errors?.required && form.controls.confirm.dirty">This field is required</li>
          <li *ngIf="form.errors?.matchingPasswords && form.controls.confirm.dirty">Password do not match</li>
        </ul>
      </div>
    </div>

    <div class="form-group">
      <label for="Profession">Profession</label>
      <div [ngClass]="{'has-error': (form.controls.profession.errors && form.controls.profession.dirty),'has-success':(!form.controls.profession.errors)}">
      <input type="text" class="form-control" id="profession" formControlName="profession" placeholder="Profession">
      <ul class="help-block">
        <li *ngIf="form.controls.profession.errors?.required && form.controls.profession.dirty">This field is required</li>
      </ul>
    </div>
    </div>

    <div class="form-group">
        <label for="address">Address</label>
        <div [ngClass]="{'has-error': (form.controls.address.errors && form.controls.address.dirty),'has-success':(!form.controls.address.errors)}">
        <input type="text" class="form-control" id="address" formControlName="address" placeholder="1234 Main St" required>
        <ul class="help-block">
          <li *ngIf="form.controls.address.errors?.required && form.controls.address.dirty">Adress is required</li>
        </ul>
      </div>
    </div>


    <div class="row">
      <div class="col-md-5 mb-3">
        <label for="country">Country</label>
        <div [ngClass]="{'has-error': (form.controls.country.errors && form.controls.country.dirty)||form.controls.country.value==1,'has-success':(!form.controls.country.errors)}">
        <select class="custom-select d-block w-100" id="country" formControlName="country">
          <option></option>
          <option>United States</option>
        </select>
        <ul class="help-block">
          <li *ngIf="(form.controls.country.errors?.required && form.controls.country.dirty)||form.controls.country.value==1">country is required</li>
        </ul>
      </div>
      </div>




      <div class="form-group">
        <label for="state">State</label>
        <div [ngClass]="{'has-error': (form.controls.state.errors && form.controls.state.dirty),'has-success':(!form.controls.state.errors)}">
        <select class="custom-select d-block w-100" formControlName="state" id="state" >
          <option value=""></option>
          <option>California</option>
        </select>
        <ul class="help-block">
          <li *ngIf="form.controls.state.errors?.required && form.controls.state.dirty">State is required</li>
        </ul>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <label for="zip">Zip</label>
        <div [ngClass]="{'has-error': (form.controls.zip.errors && form.controls.zip.dirty),'has-success':(!form.controls.zip.errors)}">
        <input type="text" class="form-control" id="zip" placeholder="" formControlName="zip">
        <ul class="help-block">
          <li *ngIf="form.controls.zip.errors?.required && form.controls.zip.dirty">Zip is required</li>
        </ul>
        </div>
      </div>
    </div>
    <hr class="mb-4">
<!--
    <div class="custom-control custom-checkbox">
      <input type="checkbox" class="custom-control-input" id="save-info">
      <label class="custom-control-label" for="save-info">Save this information for next time</label>
    </div>
-->

    <button [disabled]= "!form.valid||processing||!emailValid||!usernameValid" type="submit" name="submit" class="btn btn-primary btn-md">Submit</button>
  </form>
  </div>
</div>
<br><br>
